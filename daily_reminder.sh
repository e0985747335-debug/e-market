#!/bin/bash
set -e

# === ç§»å‹•åˆ°å°ˆæ¡ˆç›®éŒ„ ===
cd ~/e-market

echo "ðŸ§  [$(date +"%Y-%m-%d %H:%M:%S")] e-Market é–‹ç™¼æ—¥èªŒè‡ªå‹•ä»»å‹™å•Ÿå‹•ä¸­..."

# === åŸ·è¡Œé–‹ç™¼æ—¥èªŒè…³æœ¬ ===
./update_log.sh

# === é¡¯ç¤ºæˆåŠŸè¨Šæ¯ ===
echo ""
echo "ðŸ“… $(date +"%Y-%m-%d %H:%M:%S")"
echo "âœ… ä»Šæ—¥é–‹ç™¼æ—¥èªŒå·²å»ºç«‹ä¸¦ä¸Šå‚³è‡³ GitHubï¼"
echo "ðŸ’¡ æª”æ¡ˆä½ç½®ï¼šlogs/$(date +"%Y-%m-%d").md"
echo "ðŸš€ é–‹å·¥æ„‰å¿«ï¼Œç¨‹å¼åƒè¾²ä½œ â€” æ…¢è€•æ…¢æ”¶ ðŸŒ±"

# === æ¡Œé¢é€šçŸ¥ (è‹¥æ”¯æ´ GUI) ===
if command -v notify-send >/dev/null 2>&1; then
  notify-send "ðŸ§  e-Market é–‹ç™¼æé†’" "âœ… ä»Šæ—¥é–‹ç™¼æ—¥èªŒå·²æ›´æ–°ä¸¦ä¸Šå‚³ GitHubï¼\nðŸš€ é–‹å·¥æ„‰å¿« ðŸŒ±"
fi

# === å¯«å…¥æ¯æ—¥ log ===
echo "[$(date +"%Y-%m-%d %H:%M:%S")] è‡ªå‹•ä»»å‹™å®Œæˆ âœ…" >> ~/e-market/logs/cron.log
